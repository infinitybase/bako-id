<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <title>Bako Identity</title>
    <script async src="https://www.googletagmanager.com/gtag/js"></script>
    <script>
      (function() {
        const hostname = window.location.hostname;
        const pathname = window.location.pathname;
        const isDev = window.location.hostname.includes('localhost')
        const isPreview = hostname.includes('preview.') || hostname.includes('vercel');

        const isMarketplaceRoute =
          hostname.includes('garage') ||
          (isDev && hostname.split('.')[0] === 'marketplace') ||
          (isDev && pathname.includes('marketplace'));

        const isBakoId = hostname.includes('bako.id');

        if (isMarketplaceRoute) {
          document.title = 'Garage';
          let link = document.querySelector('link[rel="icon"]');
          if (link) {
            link.href = '/garage-favicon.svg';
          }
        }

        if (isMarketplaceRoute && !isDev && !isPreview) {
          console.log('[DEV] Garage');
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-33E9T67CEZ');
        }

        if (isBakoId && !isDev && !isPreview) {
          console.log('[DEV] Bako Identity');
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-21RDZZWWHB');
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
